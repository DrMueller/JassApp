@using System.Globalization
@using JassApp.Domain.Coiffeur.Models
@using JassApp.Presentation.Shared.LoadingIndication
@using MudBlazor
<LoadingIndicator IsLoading="IsLoading">
    <MudTable Items="Runden" Hover="true" SortLabel="Sort By" Elevation="0" AllowUnsorted="false">
        <HeaderContent>
            <MudTh>
                <MudTableSortLabel SortBy="new Func<CoiffeurSpielrunde, object>(x => x.Id)">ID</MudTableSortLabel>
            </MudTh>
            <MudTh>
                <MudTableSortLabel InitialDirection="SortDirection.Descending" SortBy="new Func<CoiffeurSpielrunde, object>(x => x.GestartetAm)">Gestartet am</MudTableSortLabel>
            </MudTh>
            <MudTh>Team 1</MudTh>
            <MudTh>Team 2</MudTh>
            <MudTh>Fertig?</MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd DataLabel="ID">@context.Id.Value</MudTd>
            <MudTd DataLabel="Gestartet am">@context.GestartetAm.ToString(CultureInfo.InvariantCulture)</MudTd>
            <MudTd DataLabel="Team 1">@context.JassTeam1.Description</MudTd>
            <MudTd DataLabel="Team 2">@context.JassTeam2.Description</MudTd>
            <MudTd DataLabel="Fertig?">@context.WasFinished</MudTd>
            <MudTd>
                <MudButton Size="Size.Small" OnClick="() => EditRunde(context.Id.Value)" Color="Color.Primary" Variant="Variant.Filled">
                    <MudIcon Icon="@Icons.Material.Filled.Edit"/>
                </MudButton>

                <MudButton Size="Size.Small" OnClick="() => SpectateRunde(context.Id.Value)" Color="Color.Primary" Variant="Variant.Filled">
                    <MudIcon Icon="@Icons.Material.Filled.RemoveRedEye"/>
                </MudButton>

                <MudButton Size="Size.Small" OnClick="() => DeleteRundeAsync(context.Id.Value)" Color="Color.Primary"
                           Variant="Variant.Filled">
                    <MudIcon Icon="@Icons.Material.Filled.Delete"/>
                </MudButton>
            </MudTd>
        </RowTemplate>
        <PagerContent>
            <MudTablePager PageSizeOptions="new[] { 50, 100 }"/>
        </PagerContent>
    </MudTable>
</LoadingIndicator>